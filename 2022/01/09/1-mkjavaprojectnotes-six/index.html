<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>网络通信和性能调优 | No weal without woe!</title><meta name="keywords" content="HTML,CSS,JavaScript,JQuery,React,Vue.js"><meta name="author" content="mjh"><meta name="copyright" content="mjh"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="网络通信和性能调优6.1 Netty入门6.1.1 TCP通信基础6.1.2 架构师视角解读Netty技术选型与核心6.1.3 架构拆包粘包 - Netty TCP拆包粘包问题的处理6.1.3.1 架构序列化- Netty 序列化实战 Marshalling6.1.3.2 架构序列化 - Netty 序列化实战 Protobuf6.1.3.3 架构序列化 - Netty自定义协议栈实战6.1.3.">
<meta property="og:type" content="article">
<meta property="og:title" content="网络通信和性能调优">
<meta property="og:url" content="https://codeofmjh.github.com/2022/01/09/1-mkjavaprojectnotes-six/index.html">
<meta property="og:site_name" content="No weal without woe!">
<meta property="og:description" content="网络通信和性能调优6.1 Netty入门6.1.1 TCP通信基础6.1.2 架构师视角解读Netty技术选型与核心6.1.3 架构拆包粘包 - Netty TCP拆包粘包问题的处理6.1.3.1 架构序列化- Netty 序列化实战 Marshalling6.1.3.2 架构序列化 - Netty 序列化实战 Protobuf6.1.3.3 架构序列化 - Netty自定义协议栈实战6.1.3.">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7">
<meta property="article:published_time" content="2022-01-09T03:24:37.000Z">
<meta property="article:modified_time" content="2022-02-09T13:23:15.196Z">
<meta property="article:author" content="mjh">
<meta property="article:tag" content="HTML">
<meta property="article:tag" content="CSS">
<meta property="article:tag" content="JavaScript">
<meta property="article:tag" content="JQuery">
<meta property="article:tag" content="React">
<meta property="article:tag" content="Vue.js">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://codeofmjh.github.com/2022/01/09/1-mkjavaprojectnotes-six/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '网络通信和性能调优',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-02-09 21:23:15'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/atom.xml" title="No weal without woe!" type="application/atom+xml">
<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data is-center"><div class="data-item"><a href="/archives/"><div class="headline">文章</div><div class="length-num">22</div></a></div><div class="data-item"><a href="/tags/"><div class="headline">标签</div><div class="length-num">5</div></a></div><div class="data-item"><a href="/categories/"><div class="headline">分类</div><div class="length-num">2</div></a></div></div><hr/></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">No weal without woe!</a></span><div id="menus"><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">网络通信和性能调优</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-01-09T03:24:37.000Z" title="发表于 2022-01-09 11:24:37">2022-01-09</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-02-09T13:23:15.196Z" title="更新于 2022-02-09 21:23:15">2022-02-09</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="网络通信和性能调优"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="网络通信和性能调优"><a href="#网络通信和性能调优" class="headerlink" title="网络通信和性能调优"></a>网络通信和性能调优</h1><h2 id="6-1-Netty入门"><a href="#6-1-Netty入门" class="headerlink" title="6.1 Netty入门"></a>6.1 Netty入门</h2><h3 id="6-1-1-TCP通信基础"><a href="#6-1-1-TCP通信基础" class="headerlink" title="6.1.1 TCP通信基础"></a>6.1.1 TCP通信基础</h3><h3 id="6-1-2-架构师视角解读Netty技术选型与核心"><a href="#6-1-2-架构师视角解读Netty技术选型与核心" class="headerlink" title="6.1.2 架构师视角解读Netty技术选型与核心"></a>6.1.2 架构师视角解读Netty技术选型与核心</h3><h3 id="6-1-3-架构拆包粘包-Netty-TCP拆包粘包问题的处理"><a href="#6-1-3-架构拆包粘包-Netty-TCP拆包粘包问题的处理" class="headerlink" title="6.1.3 架构拆包粘包 - Netty TCP拆包粘包问题的处理"></a>6.1.3 架构拆包粘包 - Netty TCP拆包粘包问题的处理</h3><h4 id="6-1-3-1-架构序列化-Netty-序列化实战-Marshalling"><a href="#6-1-3-1-架构序列化-Netty-序列化实战-Marshalling" class="headerlink" title="6.1.3.1 架构序列化- Netty 序列化实战 Marshalling"></a>6.1.3.1 架构序列化- Netty 序列化实战 Marshalling</h4><h4 id="6-1-3-2-架构序列化-Netty-序列化实战-Protobuf"><a href="#6-1-3-2-架构序列化-Netty-序列化实战-Protobuf" class="headerlink" title="6.1.3.2 架构序列化 - Netty 序列化实战 Protobuf"></a>6.1.3.2 架构序列化 - Netty 序列化实战 Protobuf</h4><h4 id="6-1-3-3-架构序列化-Netty自定义协议栈实战"><a href="#6-1-3-3-架构序列化-Netty自定义协议栈实战" class="headerlink" title="6.1.3.3 架构序列化 - Netty自定义协议栈实战"></a>6.1.3.3 架构序列化 - Netty自定义协议栈实战</h4><h4 id="6-1-3-4-Netty-HTTP协议栈"><a href="#6-1-3-4-Netty-HTTP协议栈" class="headerlink" title="6.1.3.4 Netty HTTP协议栈"></a>6.1.3.4 Netty HTTP协议栈</h4><h2 id="6-2-Netty高级"><a href="#6-2-Netty高级" class="headerlink" title="6.2 Netty高级"></a>6.2 Netty高级</h2><h3 id="6-2-1-Netty项目最佳实战-数据可靠性通信场景分析与架构设计"><a href="#6-2-1-Netty项目最佳实战-数据可靠性通信场景分析与架构设计" class="headerlink" title="6.2.1 Netty项目最佳实战- 数据可靠性通信场景分析与架构设计"></a>6.2.1 Netty项目最佳实战- 数据可靠性通信场景分析与架构设计</h3><h3 id="6-2-2-Netty项目最佳实战-数据结构定义与分析（-Spring-与-硬编码方式定义）"><a href="#6-2-2-Netty项目最佳实战-数据结构定义与分析（-Spring-与-硬编码方式定义）" class="headerlink" title="6.2.2 Netty项目最佳实战- 数据结构定义与分析（@Spring 与 硬编码方式定义）"></a>6.2.2 Netty项目最佳实战- 数据结构定义与分析（@Spring 与 硬编码方式定义）</h3><h3 id="6-2-3-Netty项目最佳实战-Server端落地"><a href="#6-2-3-Netty项目最佳实战-Server端落地" class="headerlink" title="6.2.3 Netty项目最佳实战- Server端落地"></a>6.2.3 Netty项目最佳实战- Server端落地</h3><h4 id="6-2-3-1-Netty项目最佳实战-Client端落地"><a href="#6-2-3-1-Netty项目最佳实战-Client端落地" class="headerlink" title="6.2.3.1 Netty项目最佳实战- Client端落地"></a>6.2.3.1 Netty项目最佳实战- Client端落地</h4><h4 id="6-2-3-2-Netty项目最佳实战-关于buffer的资源释放问题详解"><a href="#6-2-3-2-Netty项目最佳实战-关于buffer的资源释放问题详解" class="headerlink" title="6.2.3.2 Netty项目最佳实战- 关于buffer的资源释放问题详解"></a>6.2.3.2 Netty项目最佳实战- 关于buffer的资源释放问题详解</h4><h4 id="6-2-3-3-应用程序优化与测试细节点讲解"><a href="#6-2-3-3-应用程序优化与测试细节点讲解" class="headerlink" title="6.2.3.3 应用程序优化与测试细节点讲解"></a>6.2.3.3 应用程序优化与测试细节点讲解</h4><h2 id="6-3-基于Netty实现RPC框架1"><a href="#6-3-基于Netty实现RPC框架1" class="headerlink" title="6.3 基于Netty实现RPC框架1"></a>6.3 基于Netty实现RPC框架1</h2><h3 id="6-3-1-实现一个最简单的RPC通信框架设计思路"><a href="#6-3-1-实现一个最简单的RPC通信框架设计思路" class="headerlink" title="6.3.1 实现一个最简单的RPC通信框架设计思路"></a>6.3.1 实现一个最简单的RPC通信框架设计思路</h3><h4 id="6-3-1-1-实现一个最简单的RPC通信框架落地"><a href="#6-3-1-1-实现一个最简单的RPC通信框架落地" class="headerlink" title="6.3.1.1 实现一个最简单的RPC通信框架落地"></a>6.3.1.1 实现一个最简单的RPC通信框架落地</h4><h3 id="6-3-2-架构设计与落地-RPC框架整体架构设计思路"><a href="#6-3-2-架构设计与落地-RPC框架整体架构设计思路" class="headerlink" title="6.3.2 架构设计与落地-RPC框架整体架构设计思路"></a>6.3.2 架构设计与落地-RPC框架整体架构设计思路</h3><h4 id="6-3-2-1-架构设计与落地-RPC整体框架API抽象与剥离"><a href="#6-3-2-1-架构设计与落地-RPC整体框架API抽象与剥离" class="headerlink" title="6.3.2.1 架构设计与落地-RPC整体框架API抽象与剥离"></a>6.3.2.1 架构设计与落地-RPC整体框架API抽象与剥离</h4><h4 id="6-3-2-2-架构设计与落地-RPC-Client-客户端落地"><a href="#6-3-2-2-架构设计与落地-RPC-Client-客户端落地" class="headerlink" title="6.3.2.2 架构设计与落地-RPC Client 客户端落地"></a>6.3.2.2 架构设计与落地-RPC Client 客户端落地</h4><h4 id="6-3-2-3-架构设计与落地-RPC-Server-服务端落地"><a href="#6-3-2-3-架构设计与落地-RPC-Server-服务端落地" class="headerlink" title="6.3.2.3 架构设计与落地-RPC Server 服务端落地"></a>6.3.2.3 架构设计与落地-RPC Server 服务端落地</h4><h2 id="6-4-基于Netty实现RPC框架2"><a href="#6-4-基于Netty实现RPC框架2" class="headerlink" title="6.4 基于Netty实现RPC框架2"></a>6.4 基于Netty实现RPC框架2</h2><h3 id="6-4-1-架构设计与落地-RPC-Proxy-代理"><a href="#6-4-1-架构设计与落地-RPC-Proxy-代理" class="headerlink" title="6.4.1 架构设计与落地-RPC Proxy 代理"></a>6.4.1 架构设计与落地-RPC Proxy 代理</h3><h3 id="6-4-2-架构设计与落地-RPC-Codec编解码"><a href="#6-4-2-架构设计与落地-RPC-Codec编解码" class="headerlink" title="6.4.2 架构设计与落地-RPC Codec编解码"></a>6.4.2 架构设计与落地-RPC Codec编解码</h3><h3 id="6-4-3-架构设计与落地-RpcCallback与RpcFuture，AQS实现"><a href="#6-4-3-架构设计与落地-RpcCallback与RpcFuture，AQS实现" class="headerlink" title="6.4.3 架构设计与落地- RpcCallback与RpcFuture，AQS实现"></a>6.4.3 架构设计与落地- RpcCallback与RpcFuture，AQS实现</h3><h4 id="6-4-3-1-架构设计与落地-RPC彩蛋功能点扩展之与Spring整合思路"><a href="#6-4-3-1-架构设计与落地-RPC彩蛋功能点扩展之与Spring整合思路" class="headerlink" title="6.4.3.1 架构设计与落地-RPC彩蛋功能点扩展之与Spring整合思路"></a>6.4.3.1 架构设计与落地-RPC彩蛋功能点扩展之与Spring整合思路</h4><h4 id="6-4-3-2-架构设计与落地-RPC彩蛋功能点扩展之注册中心整合思路"><a href="#6-4-3-2-架构设计与落地-RPC彩蛋功能点扩展之注册中心整合思路" class="headerlink" title="6.4.3.2 架构设计与落地-RPC彩蛋功能点扩展之注册中心整合思路"></a>6.4.3.2 架构设计与落地-RPC彩蛋功能点扩展之注册中心整合思路</h4><h2 id="6-5-应用监控和性能调优之工具"><a href="#6-5-应用监控和性能调优之工具" class="headerlink" title="6.5 应用监控和性能调优之工具"></a>6.5 应用监控和性能调优之工具</h2><h3 id="6-5-1-开源的链路跟踪工具及对比"><a href="#6-5-1-开源的链路跟踪工具及对比" class="headerlink" title="6.5.1 开源的链路跟踪工具及对比"></a>6.5.1 开源的链路跟踪工具及对比</h3><h3 id="6-5-2-Skywalking监控Java应用"><a href="#6-5-2-Skywalking监控Java应用" class="headerlink" title="6.5.2 Skywalking监控Java应用"></a>6.5.2 Skywalking监控Java应用</h3><h4 id="6-5-2-1-Skywalking监控数据库"><a href="#6-5-2-1-Skywalking监控数据库" class="headerlink" title="6.5.2.1 Skywalking监控数据库"></a>6.5.2.1 Skywalking监控数据库</h4><h4 id="6-5-2-2-Skywalking高可用"><a href="#6-5-2-2-Skywalking高可用" class="headerlink" title="6.5.2.2 Skywalking高可用"></a>6.5.2.2 Skywalking高可用</h4><h4 id="6-5-2-3-Skywalking存储"><a href="#6-5-2-3-Skywalking存储" class="headerlink" title="6.5.2.3 Skywalking存储"></a>6.5.2.3 Skywalking存储</h4><h3 id="6-5-3-Spring-Boot-Actuator-生产可用的应用监控工具"><a href="#6-5-3-Spring-Boot-Actuator-生产可用的应用监控工具" class="headerlink" title="6.5.3 Spring Boot Actuator - 生产可用的应用监控工具"></a>6.5.3 Spring Boot Actuator - 生产可用的应用监控工具</h3><h4 id="6-5-3-1-Prometheus-监控工具"><a href="#6-5-3-1-Prometheus-监控工具" class="headerlink" title="6.5.3.1 Prometheus - 监控工具"></a>6.5.3.1 Prometheus - 监控工具</h4><h4 id="6-5-3-2-Grafana-监控-告警工具"><a href="#6-5-3-2-Grafana-监控-告警工具" class="headerlink" title="6.5.3.2 Grafana - 监控 + 告警工具"></a>6.5.3.2 Grafana - 监控 + 告警工具</h4><h4 id="6-5-3-3-Tomcat-Manager-Tomcat监控"><a href="#6-5-3-3-Tomcat-Manager-Tomcat监控" class="headerlink" title="6.5.3.3 Tomcat Manager - Tomcat监控"></a>6.5.3.3 Tomcat Manager - Tomcat监控</h4><h4 id="6-5-3-4-psi-probe-Tomcat监控"><a href="#6-5-3-4-psi-probe-Tomcat监控" class="headerlink" title="6.5.3.4 psi-probe - Tomcat监控"></a>6.5.3.4 psi-probe - Tomcat监控</h4><h4 id="6-5-3-5-日志监控，-慢SQL监控"><a href="#6-5-3-5-日志监控，-慢SQL监控" class="headerlink" title="6.5.3.5 日志监控， 慢SQL监控"></a>6.5.3.5 日志监控， 慢SQL监控</h4><h2 id="6-6-应用监控和性能调优之实战"><a href="#6-6-应用监控和性能调优之实战" class="headerlink" title="6.6 应用监控和性能调优之实战"></a>6.6 应用监控和性能调优之实战</h2><h3 id="6-6-1-应用调优常用技巧1-池化对象，本地异步化（3种方式）"><a href="#6-6-1-应用调优常用技巧1-池化对象，本地异步化（3种方式）" class="headerlink" title="6.6.1 应用调优常用技巧1 - 池化对象，本地异步化（3种方式）"></a>6.6.1 应用调优常用技巧1 - 池化对象，本地异步化（3种方式）</h3><h4 id="6-6-1-1-应用调优常用技巧2-远程调用异步化（3种方式），缓存"><a href="#6-6-1-1-应用调优常用技巧2-远程调用异步化（3种方式），缓存" class="headerlink" title="6.6.1.1 应用调优常用技巧2- 远程调用异步化（3种方式），缓存"></a>6.6.1.1 应用调优常用技巧2- 远程调用异步化（3种方式），缓存</h4><h3 id="6-6-2-并发编程4板斧（线程封闭、降低锁粒度、锁粗化、无锁）"><a href="#6-6-2-并发编程4板斧（线程封闭、降低锁粒度、锁粗化、无锁）" class="headerlink" title="6.6.2 并发编程4板斧（线程封闭、降低锁粒度、锁粗化、无锁）"></a>6.6.2 并发编程4板斧（线程封闭、降低锁粒度、锁粗化、无锁）</h3><h4 id="6-6-2-1-应用调优实战1-定位应用层面性能问题的通用思路与步骤"><a href="#6-6-2-1-应用调优实战1-定位应用层面性能问题的通用思路与步骤" class="headerlink" title="6.6.2.1 应用调优实战1 - 定位应用层面性能问题的通用思路与步骤"></a>6.6.2.1 应用调优实战1 - 定位应用层面性能问题的通用思路与步骤</h4><h4 id="6-6-2-2-应用调优实战2-线程池调优"><a href="#6-6-2-2-应用调优实战2-线程池调优" class="headerlink" title="6.6.2.2 应用调优实战2 - 线程池调优"></a>6.6.2.2 应用调优实战2 - 线程池调优</h4><h3 id="6-6-3-Tomcat调优1-原生Tomcat调优配置属性"><a href="#6-6-3-Tomcat调优1-原生Tomcat调优配置属性" class="headerlink" title="6.6.3 Tomcat调优1 - 原生Tomcat调优配置属性"></a>6.6.3 Tomcat调优1 - 原生Tomcat调优配置属性</h3><h4 id="6-6-3-1-Tomcat调优2-Spring-Boot内嵌式Tomcat调优配置属性"><a href="#6-6-3-1-Tomcat调优2-Spring-Boot内嵌式Tomcat调优配置属性" class="headerlink" title="6.6.3.1 Tomcat调优2 - Spring Boot内嵌式Tomcat调优配置属性"></a>6.6.3.1 Tomcat调优2 - Spring Boot内嵌式Tomcat调优配置属性</h4><h4 id="6-6-3-2-Tomcat调优3-Tomcat调优手把手"><a href="#6-6-3-2-Tomcat调优3-Tomcat调优手把手" class="headerlink" title="6.6.3.2 Tomcat调优3 - Tomcat调优手把手"></a>6.6.3.2 Tomcat调优3 - Tomcat调优手把手</h4><h3 id="6-6-4-应用调优案例实战"><a href="#6-6-4-应用调优案例实战" class="headerlink" title="6.6.4 应用调优案例实战"></a>6.6.4 应用调优案例实战</h3><h2 id="6-7-JVM性能调优之工具"><a href="#6-7-JVM性能调优之工具" class="headerlink" title="6.7 JVM性能调优之工具"></a>6.7 JVM性能调优之工具</h2><h3 id="6-7-1-垃圾回收算法-复制，-标记清除，标记整理"><a href="#6-7-1-垃圾回收算法-复制，-标记清除，标记整理" class="headerlink" title="6.7.1 垃圾回收算法 - 复制， 标记清除，标记整理"></a>6.7.1 垃圾回收算法 - 复制， 标记清除，标记整理</h3><h3 id="6-7-2-垃圾回收器-Serial，Parallel，ParNew，CMS，G1，ZGC"><a href="#6-7-2-垃圾回收器-Serial，Parallel，ParNew，CMS，G1，ZGC" class="headerlink" title="6.7.2 垃圾回收器 - Serial，Parallel，ParNew，CMS，G1，ZGC"></a>6.7.2 垃圾回收器 - Serial，Parallel，ParNew，CMS，G1，ZGC</h3><h4 id="6-7-2-1-垃圾回收器-多款回收器如何配合"><a href="#6-7-2-1-垃圾回收器-多款回收器如何配合" class="headerlink" title="6.7.2.1 垃圾回收器 - 多款回收器如何配合"></a>6.7.2.1 垃圾回收器 - 多款回收器如何配合</h4><h3 id="6-7-3-JVM监控工具-jinfo，-jps，jstat，jstack，jmap"><a href="#6-7-3-JVM监控工具-jinfo，-jps，jstat，jstack，jmap" class="headerlink" title="6.7.3 JVM监控工具 - jinfo， jps，jstat，jstack，jmap"></a>6.7.3 JVM监控工具 - jinfo， jps，jstat，jstack，jmap</h3><h4 id="6-7-3-1-JVM监控工具-jconsole，jvisualvm，jmc，mat"><a href="#6-7-3-1-JVM监控工具-jconsole，jvisualvm，jmc，mat" class="headerlink" title="6.7.3.1 JVM监控工具 - jconsole，jvisualvm，jmc，mat"></a>6.7.3.1 JVM监控工具 - jconsole，jvisualvm，jmc，mat</h4><h4 id="6-7-3-2-GC日志分析工具-GCEasy与GCPlot"><a href="#6-7-3-2-GC日志分析工具-GCEasy与GCPlot" class="headerlink" title="6.7.3.2 GC日志分析工具 - GCEasy与GCPlot"></a>6.7.3.2 GC日志分析工具 - GCEasy与GCPlot</h4><h3 id="6-7-4-线程Dump日志分析工具-FastThread"><a href="#6-7-4-线程Dump日志分析工具-FastThread" class="headerlink" title="6.7.4 线程Dump日志分析工具 - FastThread"></a>6.7.4 线程Dump日志分析工具 - FastThread</h3><h4 id="6-7-4-1-堆Dump日志分析工具-HeapHero"><a href="#6-7-4-1-堆Dump日志分析工具-HeapHero" class="headerlink" title="6.7.4.1 堆Dump日志分析工具 - HeapHero"></a>6.7.4.1 堆Dump日志分析工具 - HeapHero</h4><h4 id="6-7-4-2-常用JVM调优参数详解"><a href="#6-7-4-2-常用JVM调优参数详解" class="headerlink" title="6.7.4.2 常用JVM调优参数详解"></a>6.7.4.2 常用JVM调优参数详解</h4><h2 id="6-8-JVM性能调优之实战"><a href="#6-8-JVM性能调优之实战" class="headerlink" title="6.8 JVM性能调优之实战"></a>6.8 JVM性能调优之实战</h2><h3 id="6-8-1-调优实战1-如何确定最小堆内存？"><a href="#6-8-1-调优实战1-如何确定最小堆内存？" class="headerlink" title="6.8.1 调优实战1 - 如何确定最小堆内存？"></a>6.8.1 调优实战1 - 如何确定最小堆内存？</h3><h4 id="6-8-1-1-调优实战2-如何确定最大堆内存？"><a href="#6-8-1-1-调优实战2-如何确定最大堆内存？" class="headerlink" title="6.8.1.1 调优实战2 - 如何确定最大堆内存？"></a>6.8.1.1 调优实战2 - 如何确定最大堆内存？</h4><h3 id="6-8-2-调优实战3-死锁分析"><a href="#6-8-2-调优实战3-死锁分析" class="headerlink" title="6.8.2 调优实战3 - 死锁分析"></a>6.8.2 调优实战3 - 死锁分析</h3><h3 id="6-8-3-调优实战4-内存溢出问题解决方案（堆内存、Metadataspace区）"><a href="#6-8-3-调优实战4-内存溢出问题解决方案（堆内存、Metadataspace区）" class="headerlink" title="6.8.3 调优实战4 - 内存溢出问题解决方案（堆内存、Metadataspace区）"></a>6.8.3 调优实战4 - 内存溢出问题解决方案（堆内存、Metadataspace区）</h3><h4 id="6-8-3-1-调优实战4-内存溢出问题解决方案（栈溢出、直接内存溢出等）"><a href="#6-8-3-1-调优实战4-内存溢出问题解决方案（栈溢出、直接内存溢出等）" class="headerlink" title="6.8.3.1 调优实战4 - 内存溢出问题解决方案（栈溢出、直接内存溢出等）"></a>6.8.3.1 调优实战4 - 内存溢出问题解决方案（栈溢出、直接内存溢出等）</h4><h4 id="6-8-3-2-调优实战5-垃圾回收器调优（吞吐量、STW权衡）"><a href="#6-8-3-2-调优实战5-垃圾回收器调优（吞吐量、STW权衡）" class="headerlink" title="6.8.3.2 调优实战5 - 垃圾回收器调优（吞吐量、STW权衡）"></a>6.8.3.2 调优实战5 - 垃圾回收器调优（吞吐量、STW权衡）</h4><h4 id="6-8-3-3-调优实战6-栈上分配、偏向锁等对系统调优的影响"><a href="#6-8-3-3-调优实战6-栈上分配、偏向锁等对系统调优的影响" class="headerlink" title="6.8.3.3 调优实战6 - 栈上分配、偏向锁等对系统调优的影响"></a>6.8.3.3 调优实战6 - 栈上分配、偏向锁等对系统调优的影响</h4><h4 id="6-8-3-5-调优实战7-升级JDK对系统优化的影响"><a href="#6-8-3-5-调优实战7-升级JDK对系统优化的影响" class="headerlink" title="6.8.3.5 调优实战7 - 升级JDK对系统优化的影响"></a>6.8.3.5 调优实战7 - 升级JDK对系统优化的影响</h4><h3 id="6-8-4-调优实战8-young-GC频繁-Full-GC频繁"><a href="#6-8-4-调优实战8-young-GC频繁-Full-GC频繁" class="headerlink" title="6.8.4 调优实战8 - young GC频繁/Full GC频繁"></a>6.8.4 调优实战8 - young GC频繁/Full GC频繁</h3><h4 id="6-8-4-1-调优实战9-应用CPU占用过高问题分析"><a href="#6-8-4-1-调优实战9-应用CPU占用过高问题分析" class="headerlink" title="6.8.4.1 调优实战9 - 应用CPU占用过高问题分析"></a>6.8.4.1 调优实战9 - 应用CPU占用过高问题分析</h4><h4 id="6-8-4-2-调优实战10-应用无端变得奇慢，而且越来越慢"><a href="#6-8-4-2-调优实战10-应用无端变得奇慢，而且越来越慢" class="headerlink" title="6.8.4.2 调优实战10 - 应用无端变得奇慢，而且越来越慢"></a>6.8.4.2 调优实战10 - 应用无端变得奇慢，而且越来越慢</h4><h2 id="6-9-数据库监控与调优"><a href="#6-9-数据库监控与调优" class="headerlink" title="6.9 数据库监控与调优"></a>6.9 数据库监控与调优</h2><h3 id="6-9-1-数据库监控-Prometheus"><a href="#6-9-1-数据库监控-Prometheus" class="headerlink" title="6.9.1 数据库监控 - Prometheus"></a>6.9.1 数据库监控 - Prometheus</h3><h3 id="6-9-2-慢查询日志"><a href="#6-9-2-慢查询日志" class="headerlink" title="6.9.2 慢查询日志"></a>6.9.2 慢查询日志</h3><h3 id="6-9-3-优化手段"><a href="#6-9-3-优化手段" class="headerlink" title="6.9.3 优化手段"></a>6.9.3 优化手段</h3><h4 id="6-9-3-1-索引分析与优化"><a href="#6-9-3-1-索引分析与优化" class="headerlink" title="6.9.3.1 索引分析与优化"></a>6.9.3.1 索引分析与优化</h4><h4 id="6-9-3-2-锁优化，Query-Profiler"><a href="#6-9-3-2-锁优化，Query-Profiler" class="headerlink" title="6.9.3.2 锁优化，Query Profiler"></a>6.9.3.2 锁优化，Query Profiler</h4><h4 id="6-9-3-3-SQL优化工具"><a href="#6-9-3-3-SQL优化工具" class="headerlink" title="6.9.3.3 SQL优化工具"></a>6.9.3.3 SQL优化工具</h4><h4 id="6-9-3-4-MySQL配置优化"><a href="#6-9-3-4-MySQL配置优化" class="headerlink" title="6.9.3.4 MySQL配置优化"></a>6.9.3.4 MySQL配置优化</h4><h3 id="6-9-4-拓展分享"><a href="#6-9-4-拓展分享" class="headerlink" title="6.9.4 拓展分享"></a>6.9.4 拓展分享</h3><h4 id="6-9-4-1-拓展分享：如何在合适的场景用合适的数据库？"><a href="#6-9-4-1-拓展分享：如何在合适的场景用合适的数据库？" class="headerlink" title="6.9.4.1 拓展分享：如何在合适的场景用合适的数据库？"></a>6.9.4.1 拓展分享：如何在合适的场景用合适的数据库？</h4><h4 id="6-9-4-2-拓展分享：业务妥协会对系统调优造成怎样的影响？"><a href="#6-9-4-2-拓展分享：业务妥协会对系统调优造成怎样的影响？" class="headerlink" title="6.9.4.2 拓展分享：业务妥协会对系统调优造成怎样的影响？"></a>6.9.4.2 拓展分享：业务妥协会对系统调优造成怎样的影响？</h4><h2 id="6-10-Linux调优和架构调优"><a href="#6-10-Linux调优和架构调优" class="headerlink" title="6.10 Linux调优和架构调优"></a>6.10 Linux调优和架构调优</h2><h3 id="6-10-1-Linux常用监控调优命令"><a href="#6-10-1-Linux常用监控调优命令" class="headerlink" title="6.10.1 Linux常用监控调优命令"></a>6.10.1 Linux常用监控调优命令</h3><h3 id="6-10-2-Linux监控可视化"><a href="#6-10-2-Linux监控可视化" class="headerlink" title="6.10.2 Linux监控可视化"></a>6.10.2 Linux监控可视化</h3><h3 id="6-10-3-传统架构存在的问题"><a href="#6-10-3-传统架构存在的问题" class="headerlink" title="6.10.3 传统架构存在的问题"></a>6.10.3 传统架构存在的问题</h3><h3 id="6-10-4-去中心化：微服务，无状态-vs-有状态"><a href="#6-10-4-去中心化：微服务，无状态-vs-有状态" class="headerlink" title="6.10.4 去中心化：微服务，无状态 vs 有状态"></a>6.10.4 去中心化：微服务，无状态 vs 有状态</h3><h3 id="6-10-5-拓展分享：技术方案对业务优化的影响"><a href="#6-10-5-拓展分享：技术方案对业务优化的影响" class="headerlink" title="6.10.5 拓展分享：技术方案对业务优化的影响"></a>6.10.5 拓展分享：技术方案对业务优化的影响</h3></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">mjh</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://codeofmjh.github.com/2022/01/09/1-mkjavaprojectnotes-six/">https://codeofmjh.github.com/2022/01/09/1-mkjavaprojectnotes-six/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://codeOfMjh.github.com" target="_blank">No weal without woe!</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/01/09/1-mkjavaprojectnotes-five/"><img class="prev-cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">容器化—docker&amp;K8S</div></div></a></div><div class="next-post pull-right"><a href="/2022/01/09/1-mkjavaprojectnotes-four/"><img class="next-cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">基于SpringCloud改造微服务</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">mjh</div><div class="author-info__description">С����·��</div></div><div class="card-info-data is-center"><div class="card-info-data-item"><a href="/archives/"><div class="headline">文章</div><div class="length-num">22</div></a></div><div class="card-info-data-item"><a href="/tags/"><div class="headline">标签</div><div class="length-num">5</div></a></div><div class="card-info-data-item"><a href="/categories/"><div class="headline">分类</div><div class="length-num">2</div></a></div></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1%E5%92%8C%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98"><span class="toc-number">1.</span> <span class="toc-text">网络通信和性能调优</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#6-1-Netty%E5%85%A5%E9%97%A8"><span class="toc-number">1.1.</span> <span class="toc-text">6.1 Netty入门</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-1-TCP%E9%80%9A%E4%BF%A1%E5%9F%BA%E7%A1%80"><span class="toc-number">1.1.1.</span> <span class="toc-text">6.1.1 TCP通信基础</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-2-%E6%9E%B6%E6%9E%84%E5%B8%88%E8%A7%86%E8%A7%92%E8%A7%A3%E8%AF%BBNetty%E6%8A%80%E6%9C%AF%E9%80%89%E5%9E%8B%E4%B8%8E%E6%A0%B8%E5%BF%83"><span class="toc-number">1.1.2.</span> <span class="toc-text">6.1.2 架构师视角解读Netty技术选型与核心</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-3-%E6%9E%B6%E6%9E%84%E6%8B%86%E5%8C%85%E7%B2%98%E5%8C%85-Netty-TCP%E6%8B%86%E5%8C%85%E7%B2%98%E5%8C%85%E9%97%AE%E9%A2%98%E7%9A%84%E5%A4%84%E7%90%86"><span class="toc-number">1.1.3.</span> <span class="toc-text">6.1.3 架构拆包粘包 - Netty TCP拆包粘包问题的处理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1-3-1-%E6%9E%B6%E6%9E%84%E5%BA%8F%E5%88%97%E5%8C%96-Netty-%E5%BA%8F%E5%88%97%E5%8C%96%E5%AE%9E%E6%88%98-Marshalling"><span class="toc-number">1.1.3.1.</span> <span class="toc-text">6.1.3.1 架构序列化- Netty 序列化实战 Marshalling</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1-3-2-%E6%9E%B6%E6%9E%84%E5%BA%8F%E5%88%97%E5%8C%96-Netty-%E5%BA%8F%E5%88%97%E5%8C%96%E5%AE%9E%E6%88%98-Protobuf"><span class="toc-number">1.1.3.2.</span> <span class="toc-text">6.1.3.2 架构序列化 - Netty 序列化实战 Protobuf</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1-3-3-%E6%9E%B6%E6%9E%84%E5%BA%8F%E5%88%97%E5%8C%96-Netty%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8D%8F%E8%AE%AE%E6%A0%88%E5%AE%9E%E6%88%98"><span class="toc-number">1.1.3.3.</span> <span class="toc-text">6.1.3.3 架构序列化 - Netty自定义协议栈实战</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1-3-4-Netty-HTTP%E5%8D%8F%E8%AE%AE%E6%A0%88"><span class="toc-number">1.1.3.4.</span> <span class="toc-text">6.1.3.4 Netty HTTP协议栈</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-2-Netty%E9%AB%98%E7%BA%A7"><span class="toc-number">1.2.</span> <span class="toc-text">6.2 Netty高级</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-1-Netty%E9%A1%B9%E7%9B%AE%E6%9C%80%E4%BD%B3%E5%AE%9E%E6%88%98-%E6%95%B0%E6%8D%AE%E5%8F%AF%E9%9D%A0%E6%80%A7%E9%80%9A%E4%BF%A1%E5%9C%BA%E6%99%AF%E5%88%86%E6%9E%90%E4%B8%8E%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1"><span class="toc-number">1.2.1.</span> <span class="toc-text">6.2.1 Netty项目最佳实战- 数据可靠性通信场景分析与架构设计</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-2-Netty%E9%A1%B9%E7%9B%AE%E6%9C%80%E4%BD%B3%E5%AE%9E%E6%88%98-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%AE%9A%E4%B9%89%E4%B8%8E%E5%88%86%E6%9E%90%EF%BC%88-Spring-%E4%B8%8E-%E7%A1%AC%E7%BC%96%E7%A0%81%E6%96%B9%E5%BC%8F%E5%AE%9A%E4%B9%89%EF%BC%89"><span class="toc-number">1.2.2.</span> <span class="toc-text">6.2.2 Netty项目最佳实战- 数据结构定义与分析（@Spring 与 硬编码方式定义）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-3-Netty%E9%A1%B9%E7%9B%AE%E6%9C%80%E4%BD%B3%E5%AE%9E%E6%88%98-Server%E7%AB%AF%E8%90%BD%E5%9C%B0"><span class="toc-number">1.2.3.</span> <span class="toc-text">6.2.3 Netty项目最佳实战- Server端落地</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2-3-1-Netty%E9%A1%B9%E7%9B%AE%E6%9C%80%E4%BD%B3%E5%AE%9E%E6%88%98-Client%E7%AB%AF%E8%90%BD%E5%9C%B0"><span class="toc-number">1.2.3.1.</span> <span class="toc-text">6.2.3.1 Netty项目最佳实战- Client端落地</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2-3-2-Netty%E9%A1%B9%E7%9B%AE%E6%9C%80%E4%BD%B3%E5%AE%9E%E6%88%98-%E5%85%B3%E4%BA%8Ebuffer%E7%9A%84%E8%B5%84%E6%BA%90%E9%87%8A%E6%94%BE%E9%97%AE%E9%A2%98%E8%AF%A6%E8%A7%A3"><span class="toc-number">1.2.3.2.</span> <span class="toc-text">6.2.3.2 Netty项目最佳实战- 关于buffer的资源释放问题详解</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2-3-3-%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E4%BC%98%E5%8C%96%E4%B8%8E%E6%B5%8B%E8%AF%95%E7%BB%86%E8%8A%82%E7%82%B9%E8%AE%B2%E8%A7%A3"><span class="toc-number">1.2.3.3.</span> <span class="toc-text">6.2.3.3 应用程序优化与测试细节点讲解</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-3-%E5%9F%BA%E4%BA%8ENetty%E5%AE%9E%E7%8E%B0RPC%E6%A1%86%E6%9E%B61"><span class="toc-number">1.3.</span> <span class="toc-text">6.3 基于Netty实现RPC框架1</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-1-%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E6%9C%80%E7%AE%80%E5%8D%95%E7%9A%84RPC%E9%80%9A%E4%BF%A1%E6%A1%86%E6%9E%B6%E8%AE%BE%E8%AE%A1%E6%80%9D%E8%B7%AF"><span class="toc-number">1.3.1.</span> <span class="toc-text">6.3.1 实现一个最简单的RPC通信框架设计思路</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-3-1-1-%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E6%9C%80%E7%AE%80%E5%8D%95%E7%9A%84RPC%E9%80%9A%E4%BF%A1%E6%A1%86%E6%9E%B6%E8%90%BD%E5%9C%B0"><span class="toc-number">1.3.1.1.</span> <span class="toc-text">6.3.1.1 实现一个最简单的RPC通信框架落地</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-2-%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1%E4%B8%8E%E8%90%BD%E5%9C%B0-RPC%E6%A1%86%E6%9E%B6%E6%95%B4%E4%BD%93%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1%E6%80%9D%E8%B7%AF"><span class="toc-number">1.3.2.</span> <span class="toc-text">6.3.2 架构设计与落地-RPC框架整体架构设计思路</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-3-2-1-%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1%E4%B8%8E%E8%90%BD%E5%9C%B0-RPC%E6%95%B4%E4%BD%93%E6%A1%86%E6%9E%B6API%E6%8A%BD%E8%B1%A1%E4%B8%8E%E5%89%A5%E7%A6%BB"><span class="toc-number">1.3.2.1.</span> <span class="toc-text">6.3.2.1 架构设计与落地-RPC整体框架API抽象与剥离</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-3-2-2-%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1%E4%B8%8E%E8%90%BD%E5%9C%B0-RPC-Client-%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%90%BD%E5%9C%B0"><span class="toc-number">1.3.2.2.</span> <span class="toc-text">6.3.2.2 架构设计与落地-RPC Client 客户端落地</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-3-2-3-%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1%E4%B8%8E%E8%90%BD%E5%9C%B0-RPC-Server-%E6%9C%8D%E5%8A%A1%E7%AB%AF%E8%90%BD%E5%9C%B0"><span class="toc-number">1.3.2.3.</span> <span class="toc-text">6.3.2.3 架构设计与落地-RPC Server 服务端落地</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-4-%E5%9F%BA%E4%BA%8ENetty%E5%AE%9E%E7%8E%B0RPC%E6%A1%86%E6%9E%B62"><span class="toc-number">1.4.</span> <span class="toc-text">6.4 基于Netty实现RPC框架2</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-1-%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1%E4%B8%8E%E8%90%BD%E5%9C%B0-RPC-Proxy-%E4%BB%A3%E7%90%86"><span class="toc-number">1.4.1.</span> <span class="toc-text">6.4.1 架构设计与落地-RPC Proxy 代理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-2-%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1%E4%B8%8E%E8%90%BD%E5%9C%B0-RPC-Codec%E7%BC%96%E8%A7%A3%E7%A0%81"><span class="toc-number">1.4.2.</span> <span class="toc-text">6.4.2 架构设计与落地-RPC Codec编解码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-3-%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1%E4%B8%8E%E8%90%BD%E5%9C%B0-RpcCallback%E4%B8%8ERpcFuture%EF%BC%8CAQS%E5%AE%9E%E7%8E%B0"><span class="toc-number">1.4.3.</span> <span class="toc-text">6.4.3 架构设计与落地- RpcCallback与RpcFuture，AQS实现</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-4-3-1-%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1%E4%B8%8E%E8%90%BD%E5%9C%B0-RPC%E5%BD%A9%E8%9B%8B%E5%8A%9F%E8%83%BD%E7%82%B9%E6%89%A9%E5%B1%95%E4%B9%8B%E4%B8%8ESpring%E6%95%B4%E5%90%88%E6%80%9D%E8%B7%AF"><span class="toc-number">1.4.3.1.</span> <span class="toc-text">6.4.3.1 架构设计与落地-RPC彩蛋功能点扩展之与Spring整合思路</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-4-3-2-%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1%E4%B8%8E%E8%90%BD%E5%9C%B0-RPC%E5%BD%A9%E8%9B%8B%E5%8A%9F%E8%83%BD%E7%82%B9%E6%89%A9%E5%B1%95%E4%B9%8B%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83%E6%95%B4%E5%90%88%E6%80%9D%E8%B7%AF"><span class="toc-number">1.4.3.2.</span> <span class="toc-text">6.4.3.2 架构设计与落地-RPC彩蛋功能点扩展之注册中心整合思路</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-5-%E5%BA%94%E7%94%A8%E7%9B%91%E6%8E%A7%E5%92%8C%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98%E4%B9%8B%E5%B7%A5%E5%85%B7"><span class="toc-number">1.5.</span> <span class="toc-text">6.5 应用监控和性能调优之工具</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5-1-%E5%BC%80%E6%BA%90%E7%9A%84%E9%93%BE%E8%B7%AF%E8%B7%9F%E8%B8%AA%E5%B7%A5%E5%85%B7%E5%8F%8A%E5%AF%B9%E6%AF%94"><span class="toc-number">1.5.1.</span> <span class="toc-text">6.5.1 开源的链路跟踪工具及对比</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5-2-Skywalking%E7%9B%91%E6%8E%A7Java%E5%BA%94%E7%94%A8"><span class="toc-number">1.5.2.</span> <span class="toc-text">6.5.2 Skywalking监控Java应用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-5-2-1-Skywalking%E7%9B%91%E6%8E%A7%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.5.2.1.</span> <span class="toc-text">6.5.2.1 Skywalking监控数据库</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-5-2-2-Skywalking%E9%AB%98%E5%8F%AF%E7%94%A8"><span class="toc-number">1.5.2.2.</span> <span class="toc-text">6.5.2.2 Skywalking高可用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-5-2-3-Skywalking%E5%AD%98%E5%82%A8"><span class="toc-number">1.5.2.3.</span> <span class="toc-text">6.5.2.3 Skywalking存储</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5-3-Spring-Boot-Actuator-%E7%94%9F%E4%BA%A7%E5%8F%AF%E7%94%A8%E7%9A%84%E5%BA%94%E7%94%A8%E7%9B%91%E6%8E%A7%E5%B7%A5%E5%85%B7"><span class="toc-number">1.5.3.</span> <span class="toc-text">6.5.3 Spring Boot Actuator - 生产可用的应用监控工具</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-5-3-1-Prometheus-%E7%9B%91%E6%8E%A7%E5%B7%A5%E5%85%B7"><span class="toc-number">1.5.3.1.</span> <span class="toc-text">6.5.3.1 Prometheus - 监控工具</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-5-3-2-Grafana-%E7%9B%91%E6%8E%A7-%E5%91%8A%E8%AD%A6%E5%B7%A5%E5%85%B7"><span class="toc-number">1.5.3.2.</span> <span class="toc-text">6.5.3.2 Grafana - 监控 + 告警工具</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-5-3-3-Tomcat-Manager-Tomcat%E7%9B%91%E6%8E%A7"><span class="toc-number">1.5.3.3.</span> <span class="toc-text">6.5.3.3 Tomcat Manager - Tomcat监控</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-5-3-4-psi-probe-Tomcat%E7%9B%91%E6%8E%A7"><span class="toc-number">1.5.3.4.</span> <span class="toc-text">6.5.3.4 psi-probe - Tomcat监控</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-5-3-5-%E6%97%A5%E5%BF%97%E7%9B%91%E6%8E%A7%EF%BC%8C-%E6%85%A2SQL%E7%9B%91%E6%8E%A7"><span class="toc-number">1.5.3.5.</span> <span class="toc-text">6.5.3.5 日志监控， 慢SQL监控</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-6-%E5%BA%94%E7%94%A8%E7%9B%91%E6%8E%A7%E5%92%8C%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98%E4%B9%8B%E5%AE%9E%E6%88%98"><span class="toc-number">1.6.</span> <span class="toc-text">6.6 应用监控和性能调优之实战</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-6-1-%E5%BA%94%E7%94%A8%E8%B0%83%E4%BC%98%E5%B8%B8%E7%94%A8%E6%8A%80%E5%B7%A71-%E6%B1%A0%E5%8C%96%E5%AF%B9%E8%B1%A1%EF%BC%8C%E6%9C%AC%E5%9C%B0%E5%BC%82%E6%AD%A5%E5%8C%96%EF%BC%883%E7%A7%8D%E6%96%B9%E5%BC%8F%EF%BC%89"><span class="toc-number">1.6.1.</span> <span class="toc-text">6.6.1 应用调优常用技巧1 - 池化对象，本地异步化（3种方式）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-6-1-1-%E5%BA%94%E7%94%A8%E8%B0%83%E4%BC%98%E5%B8%B8%E7%94%A8%E6%8A%80%E5%B7%A72-%E8%BF%9C%E7%A8%8B%E8%B0%83%E7%94%A8%E5%BC%82%E6%AD%A5%E5%8C%96%EF%BC%883%E7%A7%8D%E6%96%B9%E5%BC%8F%EF%BC%89%EF%BC%8C%E7%BC%93%E5%AD%98"><span class="toc-number">1.6.1.1.</span> <span class="toc-text">6.6.1.1 应用调优常用技巧2- 远程调用异步化（3种方式），缓存</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-6-2-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B4%E6%9D%BF%E6%96%A7%EF%BC%88%E7%BA%BF%E7%A8%8B%E5%B0%81%E9%97%AD%E3%80%81%E9%99%8D%E4%BD%8E%E9%94%81%E7%B2%92%E5%BA%A6%E3%80%81%E9%94%81%E7%B2%97%E5%8C%96%E3%80%81%E6%97%A0%E9%94%81%EF%BC%89"><span class="toc-number">1.6.2.</span> <span class="toc-text">6.6.2 并发编程4板斧（线程封闭、降低锁粒度、锁粗化、无锁）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-6-2-1-%E5%BA%94%E7%94%A8%E8%B0%83%E4%BC%98%E5%AE%9E%E6%88%981-%E5%AE%9A%E4%BD%8D%E5%BA%94%E7%94%A8%E5%B1%82%E9%9D%A2%E6%80%A7%E8%83%BD%E9%97%AE%E9%A2%98%E7%9A%84%E9%80%9A%E7%94%A8%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%AD%A5%E9%AA%A4"><span class="toc-number">1.6.2.1.</span> <span class="toc-text">6.6.2.1 应用调优实战1 - 定位应用层面性能问题的通用思路与步骤</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-6-2-2-%E5%BA%94%E7%94%A8%E8%B0%83%E4%BC%98%E5%AE%9E%E6%88%982-%E7%BA%BF%E7%A8%8B%E6%B1%A0%E8%B0%83%E4%BC%98"><span class="toc-number">1.6.2.2.</span> <span class="toc-text">6.6.2.2 应用调优实战2 - 线程池调优</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-6-3-Tomcat%E8%B0%83%E4%BC%981-%E5%8E%9F%E7%94%9FTomcat%E8%B0%83%E4%BC%98%E9%85%8D%E7%BD%AE%E5%B1%9E%E6%80%A7"><span class="toc-number">1.6.3.</span> <span class="toc-text">6.6.3 Tomcat调优1 - 原生Tomcat调优配置属性</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-6-3-1-Tomcat%E8%B0%83%E4%BC%982-Spring-Boot%E5%86%85%E5%B5%8C%E5%BC%8FTomcat%E8%B0%83%E4%BC%98%E9%85%8D%E7%BD%AE%E5%B1%9E%E6%80%A7"><span class="toc-number">1.6.3.1.</span> <span class="toc-text">6.6.3.1 Tomcat调优2 - Spring Boot内嵌式Tomcat调优配置属性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-6-3-2-Tomcat%E8%B0%83%E4%BC%983-Tomcat%E8%B0%83%E4%BC%98%E6%89%8B%E6%8A%8A%E6%89%8B"><span class="toc-number">1.6.3.2.</span> <span class="toc-text">6.6.3.2 Tomcat调优3 - Tomcat调优手把手</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-6-4-%E5%BA%94%E7%94%A8%E8%B0%83%E4%BC%98%E6%A1%88%E4%BE%8B%E5%AE%9E%E6%88%98"><span class="toc-number">1.6.4.</span> <span class="toc-text">6.6.4 应用调优案例实战</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-7-JVM%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98%E4%B9%8B%E5%B7%A5%E5%85%B7"><span class="toc-number">1.7.</span> <span class="toc-text">6.7 JVM性能调优之工具</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-7-1-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E7%AE%97%E6%B3%95-%E5%A4%8D%E5%88%B6%EF%BC%8C-%E6%A0%87%E8%AE%B0%E6%B8%85%E9%99%A4%EF%BC%8C%E6%A0%87%E8%AE%B0%E6%95%B4%E7%90%86"><span class="toc-number">1.7.1.</span> <span class="toc-text">6.7.1 垃圾回收算法 - 复制， 标记清除，标记整理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-7-2-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8-Serial%EF%BC%8CParallel%EF%BC%8CParNew%EF%BC%8CCMS%EF%BC%8CG1%EF%BC%8CZGC"><span class="toc-number">1.7.2.</span> <span class="toc-text">6.7.2 垃圾回收器 - Serial，Parallel，ParNew，CMS，G1，ZGC</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-7-2-1-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8-%E5%A4%9A%E6%AC%BE%E5%9B%9E%E6%94%B6%E5%99%A8%E5%A6%82%E4%BD%95%E9%85%8D%E5%90%88"><span class="toc-number">1.7.2.1.</span> <span class="toc-text">6.7.2.1 垃圾回收器 - 多款回收器如何配合</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-7-3-JVM%E7%9B%91%E6%8E%A7%E5%B7%A5%E5%85%B7-jinfo%EF%BC%8C-jps%EF%BC%8Cjstat%EF%BC%8Cjstack%EF%BC%8Cjmap"><span class="toc-number">1.7.3.</span> <span class="toc-text">6.7.3 JVM监控工具 - jinfo， jps，jstat，jstack，jmap</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-7-3-1-JVM%E7%9B%91%E6%8E%A7%E5%B7%A5%E5%85%B7-jconsole%EF%BC%8Cjvisualvm%EF%BC%8Cjmc%EF%BC%8Cmat"><span class="toc-number">1.7.3.1.</span> <span class="toc-text">6.7.3.1 JVM监控工具 - jconsole，jvisualvm，jmc，mat</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-7-3-2-GC%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90%E5%B7%A5%E5%85%B7-GCEasy%E4%B8%8EGCPlot"><span class="toc-number">1.7.3.2.</span> <span class="toc-text">6.7.3.2 GC日志分析工具 - GCEasy与GCPlot</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-7-4-%E7%BA%BF%E7%A8%8BDump%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90%E5%B7%A5%E5%85%B7-FastThread"><span class="toc-number">1.7.4.</span> <span class="toc-text">6.7.4 线程Dump日志分析工具 - FastThread</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-7-4-1-%E5%A0%86Dump%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90%E5%B7%A5%E5%85%B7-HeapHero"><span class="toc-number">1.7.4.1.</span> <span class="toc-text">6.7.4.1 堆Dump日志分析工具 - HeapHero</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-7-4-2-%E5%B8%B8%E7%94%A8JVM%E8%B0%83%E4%BC%98%E5%8F%82%E6%95%B0%E8%AF%A6%E8%A7%A3"><span class="toc-number">1.7.4.2.</span> <span class="toc-text">6.7.4.2 常用JVM调优参数详解</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-8-JVM%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98%E4%B9%8B%E5%AE%9E%E6%88%98"><span class="toc-number">1.8.</span> <span class="toc-text">6.8 JVM性能调优之实战</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-8-1-%E8%B0%83%E4%BC%98%E5%AE%9E%E6%88%981-%E5%A6%82%E4%BD%95%E7%A1%AE%E5%AE%9A%E6%9C%80%E5%B0%8F%E5%A0%86%E5%86%85%E5%AD%98%EF%BC%9F"><span class="toc-number">1.8.1.</span> <span class="toc-text">6.8.1 调优实战1 - 如何确定最小堆内存？</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-8-1-1-%E8%B0%83%E4%BC%98%E5%AE%9E%E6%88%982-%E5%A6%82%E4%BD%95%E7%A1%AE%E5%AE%9A%E6%9C%80%E5%A4%A7%E5%A0%86%E5%86%85%E5%AD%98%EF%BC%9F"><span class="toc-number">1.8.1.1.</span> <span class="toc-text">6.8.1.1 调优实战2 - 如何确定最大堆内存？</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-8-2-%E8%B0%83%E4%BC%98%E5%AE%9E%E6%88%983-%E6%AD%BB%E9%94%81%E5%88%86%E6%9E%90"><span class="toc-number">1.8.2.</span> <span class="toc-text">6.8.2 调优实战3 - 死锁分析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-8-3-%E8%B0%83%E4%BC%98%E5%AE%9E%E6%88%984-%E5%86%85%E5%AD%98%E6%BA%A2%E5%87%BA%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%EF%BC%88%E5%A0%86%E5%86%85%E5%AD%98%E3%80%81Metadataspace%E5%8C%BA%EF%BC%89"><span class="toc-number">1.8.3.</span> <span class="toc-text">6.8.3 调优实战4 - 内存溢出问题解决方案（堆内存、Metadataspace区）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-8-3-1-%E8%B0%83%E4%BC%98%E5%AE%9E%E6%88%984-%E5%86%85%E5%AD%98%E6%BA%A2%E5%87%BA%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%EF%BC%88%E6%A0%88%E6%BA%A2%E5%87%BA%E3%80%81%E7%9B%B4%E6%8E%A5%E5%86%85%E5%AD%98%E6%BA%A2%E5%87%BA%E7%AD%89%EF%BC%89"><span class="toc-number">1.8.3.1.</span> <span class="toc-text">6.8.3.1 调优实战4 - 内存溢出问题解决方案（栈溢出、直接内存溢出等）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-8-3-2-%E8%B0%83%E4%BC%98%E5%AE%9E%E6%88%985-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8%E8%B0%83%E4%BC%98%EF%BC%88%E5%90%9E%E5%90%90%E9%87%8F%E3%80%81STW%E6%9D%83%E8%A1%A1%EF%BC%89"><span class="toc-number">1.8.3.2.</span> <span class="toc-text">6.8.3.2 调优实战5 - 垃圾回收器调优（吞吐量、STW权衡）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-8-3-3-%E8%B0%83%E4%BC%98%E5%AE%9E%E6%88%986-%E6%A0%88%E4%B8%8A%E5%88%86%E9%85%8D%E3%80%81%E5%81%8F%E5%90%91%E9%94%81%E7%AD%89%E5%AF%B9%E7%B3%BB%E7%BB%9F%E8%B0%83%E4%BC%98%E7%9A%84%E5%BD%B1%E5%93%8D"><span class="toc-number">1.8.3.3.</span> <span class="toc-text">6.8.3.3 调优实战6 - 栈上分配、偏向锁等对系统调优的影响</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-8-3-5-%E8%B0%83%E4%BC%98%E5%AE%9E%E6%88%987-%E5%8D%87%E7%BA%A7JDK%E5%AF%B9%E7%B3%BB%E7%BB%9F%E4%BC%98%E5%8C%96%E7%9A%84%E5%BD%B1%E5%93%8D"><span class="toc-number">1.8.3.4.</span> <span class="toc-text">6.8.3.5 调优实战7 - 升级JDK对系统优化的影响</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-8-4-%E8%B0%83%E4%BC%98%E5%AE%9E%E6%88%988-young-GC%E9%A2%91%E7%B9%81-Full-GC%E9%A2%91%E7%B9%81"><span class="toc-number">1.8.4.</span> <span class="toc-text">6.8.4 调优实战8 - young GC频繁&#x2F;Full GC频繁</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-8-4-1-%E8%B0%83%E4%BC%98%E5%AE%9E%E6%88%989-%E5%BA%94%E7%94%A8CPU%E5%8D%A0%E7%94%A8%E8%BF%87%E9%AB%98%E9%97%AE%E9%A2%98%E5%88%86%E6%9E%90"><span class="toc-number">1.8.4.1.</span> <span class="toc-text">6.8.4.1 调优实战9 - 应用CPU占用过高问题分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-8-4-2-%E8%B0%83%E4%BC%98%E5%AE%9E%E6%88%9810-%E5%BA%94%E7%94%A8%E6%97%A0%E7%AB%AF%E5%8F%98%E5%BE%97%E5%A5%87%E6%85%A2%EF%BC%8C%E8%80%8C%E4%B8%94%E8%B6%8A%E6%9D%A5%E8%B6%8A%E6%85%A2"><span class="toc-number">1.8.4.2.</span> <span class="toc-text">6.8.4.2 调优实战10 - 应用无端变得奇慢，而且越来越慢</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-9-%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9B%91%E6%8E%A7%E4%B8%8E%E8%B0%83%E4%BC%98"><span class="toc-number">1.9.</span> <span class="toc-text">6.9 数据库监控与调优</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-9-1-%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9B%91%E6%8E%A7-Prometheus"><span class="toc-number">1.9.1.</span> <span class="toc-text">6.9.1 数据库监控 - Prometheus</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-9-2-%E6%85%A2%E6%9F%A5%E8%AF%A2%E6%97%A5%E5%BF%97"><span class="toc-number">1.9.2.</span> <span class="toc-text">6.9.2 慢查询日志</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-9-3-%E4%BC%98%E5%8C%96%E6%89%8B%E6%AE%B5"><span class="toc-number">1.9.3.</span> <span class="toc-text">6.9.3 优化手段</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-9-3-1-%E7%B4%A2%E5%BC%95%E5%88%86%E6%9E%90%E4%B8%8E%E4%BC%98%E5%8C%96"><span class="toc-number">1.9.3.1.</span> <span class="toc-text">6.9.3.1 索引分析与优化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-9-3-2-%E9%94%81%E4%BC%98%E5%8C%96%EF%BC%8CQuery-Profiler"><span class="toc-number">1.9.3.2.</span> <span class="toc-text">6.9.3.2 锁优化，Query Profiler</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-9-3-3-SQL%E4%BC%98%E5%8C%96%E5%B7%A5%E5%85%B7"><span class="toc-number">1.9.3.3.</span> <span class="toc-text">6.9.3.3 SQL优化工具</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-9-3-4-MySQL%E9%85%8D%E7%BD%AE%E4%BC%98%E5%8C%96"><span class="toc-number">1.9.3.4.</span> <span class="toc-text">6.9.3.4 MySQL配置优化</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-9-4-%E6%8B%93%E5%B1%95%E5%88%86%E4%BA%AB"><span class="toc-number">1.9.4.</span> <span class="toc-text">6.9.4 拓展分享</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-9-4-1-%E6%8B%93%E5%B1%95%E5%88%86%E4%BA%AB%EF%BC%9A%E5%A6%82%E4%BD%95%E5%9C%A8%E5%90%88%E9%80%82%E7%9A%84%E5%9C%BA%E6%99%AF%E7%94%A8%E5%90%88%E9%80%82%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%9F"><span class="toc-number">1.9.4.1.</span> <span class="toc-text">6.9.4.1 拓展分享：如何在合适的场景用合适的数据库？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-9-4-2-%E6%8B%93%E5%B1%95%E5%88%86%E4%BA%AB%EF%BC%9A%E4%B8%9A%E5%8A%A1%E5%A6%A5%E5%8D%8F%E4%BC%9A%E5%AF%B9%E7%B3%BB%E7%BB%9F%E8%B0%83%E4%BC%98%E9%80%A0%E6%88%90%E6%80%8E%E6%A0%B7%E7%9A%84%E5%BD%B1%E5%93%8D%EF%BC%9F"><span class="toc-number">1.9.4.2.</span> <span class="toc-text">6.9.4.2 拓展分享：业务妥协会对系统调优造成怎样的影响？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-10-Linux%E8%B0%83%E4%BC%98%E5%92%8C%E6%9E%B6%E6%9E%84%E8%B0%83%E4%BC%98"><span class="toc-number">1.10.</span> <span class="toc-text">6.10 Linux调优和架构调优</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-10-1-Linux%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%E8%B0%83%E4%BC%98%E5%91%BD%E4%BB%A4"><span class="toc-number">1.10.1.</span> <span class="toc-text">6.10.1 Linux常用监控调优命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-10-2-Linux%E7%9B%91%E6%8E%A7%E5%8F%AF%E8%A7%86%E5%8C%96"><span class="toc-number">1.10.2.</span> <span class="toc-text">6.10.2 Linux监控可视化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-10-3-%E4%BC%A0%E7%BB%9F%E6%9E%B6%E6%9E%84%E5%AD%98%E5%9C%A8%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">1.10.3.</span> <span class="toc-text">6.10.3 传统架构存在的问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-10-4-%E5%8E%BB%E4%B8%AD%E5%BF%83%E5%8C%96%EF%BC%9A%E5%BE%AE%E6%9C%8D%E5%8A%A1%EF%BC%8C%E6%97%A0%E7%8A%B6%E6%80%81-vs-%E6%9C%89%E7%8A%B6%E6%80%81"><span class="toc-number">1.10.4.</span> <span class="toc-text">6.10.4 去中心化：微服务，无状态 vs 有状态</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-10-5-%E6%8B%93%E5%B1%95%E5%88%86%E4%BA%AB%EF%BC%9A%E6%8A%80%E6%9C%AF%E6%96%B9%E6%A1%88%E5%AF%B9%E4%B8%9A%E5%8A%A1%E4%BC%98%E5%8C%96%E7%9A%84%E5%BD%B1%E5%93%8D"><span class="toc-number">1.10.5.</span> <span class="toc-text">6.10.5 拓展分享：技术方案对业务优化的影响</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/01/09/1-mkjavaprojectnotes-five/" title="容器化—docker&amp;K8S"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="容器化—docker&amp;K8S"/></a><div class="content"><a class="title" href="/2022/01/09/1-mkjavaprojectnotes-five/" title="容器化—docker&amp;K8S">容器化—docker&amp;K8S</a><time datetime="2022-01-09T03:24:37.000Z" title="发表于 2022-01-09 11:24:37">2022-01-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/01/09/1-mkjavaprojectnotes-six/" title="网络通信和性能调优"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="网络通信和性能调优"/></a><div class="content"><a class="title" href="/2022/01/09/1-mkjavaprojectnotes-six/" title="网络通信和性能调优">网络通信和性能调优</a><time datetime="2022-01-09T03:24:37.000Z" title="发表于 2022-01-09 11:24:37">2022-01-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/01/09/1-mkjavaprojectnotes-four/" title="基于SpringCloud改造微服务"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="基于SpringCloud改造微服务"/></a><div class="content"><a class="title" href="/2022/01/09/1-mkjavaprojectnotes-four/" title="基于SpringCloud改造微服务">基于SpringCloud改造微服务</a><time datetime="2022-01-09T03:24:37.000Z" title="发表于 2022-01-09 11:24:37">2022-01-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/01/09/1-mkjavaprojectnotes-three/" title="分布式技术要点"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="分布式技术要点"/></a><div class="content"><a class="title" href="/2022/01/09/1-mkjavaprojectnotes-three/" title="分布式技术要点">分布式技术要点</a><time datetime="2022-01-09T03:24:37.000Z" title="发表于 2022-01-09 11:24:37">2022-01-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/01/09/1-mkjavaprojectnotes-two/" title="集群式高可用"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="集群式高可用"/></a><div class="content"><a class="title" href="/2022/01/09/1-mkjavaprojectnotes-two/" title="集群式高可用">集群式高可用</a><time datetime="2022-01-09T03:24:37.000Z" title="发表于 2022-01-09 11:24:37">2022-01-09</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By mjh</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script>
            window.imageLazyLoadSetting = {
                isSPA: false,
                processImages: null,
            };
        </script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})});</script><script>!function(n){n.imageLazyLoadSetting.processImages=i;var e=n.imageLazyLoadSetting.isSPA,r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function i(){e&&(r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")));for(var t,a=0;a<r.length;a++)0<=(t=(t=r[a]).getBoundingClientRect()).bottom&&0<=t.left&&t.top<=(n.innerHeight||document.documentElement.clientHeight)&&function(){var t,e,n,i,o=r[a];t=o,e=function(){r=r.filter(function(t){return o!==t})},n=new Image,i=t.getAttribute("data-original"),n.onload=function(){t.src=i,e&&e()},n.src=i}()}i(),n.addEventListener("scroll",function(){var t,e;t=i,e=n,clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(e)},500)})}(this);</script></body></html>